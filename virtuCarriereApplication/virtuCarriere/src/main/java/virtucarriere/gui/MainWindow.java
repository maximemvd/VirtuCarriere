/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package virtucarriere.gui;

import java.awt.*;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import java.util.List;
import javax.swing.*;
import virtucarriere.Domaine.AffichageUtil.UnitConverter;
import virtucarriere.Domaine.Carriere.Plan.*;
import virtucarriere.Domaine.Carriere.Simulation.Camion;
import virtucarriere.Domaine.Carriere.Simulation.Chargeur;
import virtucarriere.Domaine.Controller.Controller;
import virtucarriere.Domaine.Controller.Controller.EquipementModes;
import virtucarriere.Domaine.Controller.Controller.VehiculeModes;

public class MainWindow extends JFrame {

  public Controller controller;

  public EquipementModes selectedEquipementMode;

  public VehiculeModes selectedVehicules;

  private MeasurementUnitMode currentMeasurementUnitMode = MeasurementUnitMode.METRIC;
  private ApplicationMode currentApplicationMode;

  public AjoutClientJFrame ajoutClientJFrame = new AjoutClientJFrame();

  public Point currentMousePoint;

  public Point delta;

  public Point initMousePoint = new Point();

  /** Creates new form MainWindow */
  public MainWindow() {
    controller = new Controller();
    initComponents();
    setFocusable(true);
  }

  public void setAppMode(ApplicationMode newMode) {
    this.currentApplicationMode = newMode;
  }

  public void setMode(EquipementModes newMode) {
    this.selectedEquipementMode = newMode;
  }

  public void setVehicule(VehiculeModes newMode) {
    this.selectedVehicules = newMode;
  }

  public enum MeasurementUnitMode {
    METRIC
  }

  public enum ApplicationMode {
    SELECT,
    SELECT_SIMUL,
    ADD_PLAN,
    ADD_ARC,
    ADD_SIMULATION
  }

  public MeasurementUnitMode getCurrentMeasurementUnitMode() {
    return currentMeasurementUnitMode;
  }

  public void setCurrentMeasurementUnitMode(MeasurementUnitMode newMeasurementUnitMode) {
    this.currentMeasurementUnitMode = newMeasurementUnitMode;
  }

  public DrawingPanel getDrawingPanel() {
    return this.drawingPanel;
  }

  /**
   * This method is called from within the constructor to initialize the form. WARNING: Do NOT
   * modify this code. The content of this method is always regenerated by the Form Editor.
   */
  @SuppressWarnings("unchecked")
  // <editor-fold defaultstate="collapsed" desc="Generated
  // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
  private void initComponents() {

    buttonGroup1 = new javax.swing.ButtonGroup();
    mainPanel = new javax.swing.JPanel();
    mainScrollPane = new javax.swing.JScrollPane();
    drawingPanel = new virtucarriere.gui.DrawingPanel(this);
    jPanel1 = new javax.swing.JPanel();
    jTabbedPane = new javax.swing.JTabbedPane();
    jPanel2 = new javax.swing.JPanel();
    jComboBox1 = new javax.swing.JComboBox<>();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    entreeButton = new javax.swing.JButton();
    jLabel5 = new javax.swing.JLabel();
    arcButton = new javax.swing.JButton();
    jLabel8 = new javax.swing.JLabel();
    textFieldCoordonneeX = new javax.swing.JTextField();
    jLabel9 = new javax.swing.JLabel();
    jLabel10 = new javax.swing.JLabel();
    textFieldCoordonneeY = new javax.swing.JTextField();
    ajoutNoeudCoordButton = new javax.swing.JButton();
    ajoutTasCoordButton = new javax.swing.JButton();
    jLabel1 = new javax.swing.JLabel();
    jTextField2 = new javax.swing.JTextField();
    jScrollPane1 = new javax.swing.JScrollPane();
    jTextArea1 = new javax.swing.JTextArea();
    jLabel7 = new javax.swing.JLabel();
    jLabel15 = new javax.swing.JLabel();
    deleteButton = new javax.swing.JButton();
    modeSelection = new javax.swing.JToggleButton();
    ajoutNoeud = new javax.swing.JToggleButton();
    jLabel19 = new javax.swing.JLabel();
    ajoutTas = new javax.swing.JToggleButton();
    comboBoxMateriaux = new javax.swing.JComboBox<>();
    ajoutNoeudCoord = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jPanel3 = new javax.swing.JPanel();
    jLabel6 = new javax.swing.JLabel();
    ajoutChargeur = new javax.swing.JToggleButton();
    jLabel11 = new javax.swing.JLabel();
    jLabel12 = new javax.swing.JLabel();
    jLabel13 = new javax.swing.JLabel();
    StartSimulation = new javax.swing.JButton();
    jScrollPane2 = new javax.swing.JScrollPane();
    TextSimulation = new javax.swing.JTextArea();
    jLabel14 = new javax.swing.JLabel();
    NomClient = new javax.swing.JTextField();
    addCamion = new javax.swing.JButton();
    materiauxComboBox = new javax.swing.JComboBox<>();
    jLabel16 = new javax.swing.JLabel();
    jLabel17 = new javax.swing.JLabel();
    jLabel18 = new javax.swing.JLabel();
    quantiteSpinner = new javax.swing.JSpinner();
    jButton1 = new javax.swing.JButton();
    selectionSimul = new javax.swing.JToggleButton();
    deleteSimul = new javax.swing.JButton();
    jLabel20 = new javax.swing.JLabel();
    xCoordSimul = new javax.swing.JTextField();
    jLabel21 = new javax.swing.JLabel();
    yCoordSimul = new javax.swing.JTextField();
    jLabel22 = new javax.swing.JLabel();
    ajoutModifChargeur = new javax.swing.JButton();
    modifierCamion = new javax.swing.JButton();
    ajoutChargeurCoord = new javax.swing.JButton();
    jMenuBar1 = new javax.swing.JMenuBar();
    fichierMenu = new javax.swing.JMenu();
    menuNouveauProjet = new javax.swing.JMenuItem();
    menuOuvrirProjet = new javax.swing.JMenuItem();
    menuSauvegarderProjet = new javax.swing.JMenuItem();
    menuSauvegarderSous = new javax.swing.JMenuItem();
    menuQuitter = new javax.swing.JMenuItem();
    editionMenu = new javax.swing.JMenu();
    menuUndo = new javax.swing.JMenuItem();
    menuRedo = new javax.swing.JMenuItem();
    menuCopier = new javax.swing.JMenuItem();
    menuColler = new javax.swing.JMenuItem();
    menuCouper = new javax.swing.JMenuItem();
    affichageMenu = new javax.swing.JMenu();
    menuAffichageGrille = new javax.swing.JMenuItem();
    modifierGrille = new javax.swing.JMenuItem();
    resetGrille = new javax.swing.JMenuItem();
    importerMenu = new javax.swing.JMenu();
    importerCarriereMenu = new javax.swing.JMenuItem();
    importerSimulationMenu = new javax.swing.JMenuItem();
    fenetreMenu = new javax.swing.JMenu();

    buttonGroup1.add(selectionSimul);
    buttonGroup1.add(modeSelection);
    buttonGroup1.add(ajoutChargeur);
    buttonGroup1.add(ajoutNoeud);
    buttonGroup1.add(ajoutTas);

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    addMouseWheelListener(
        new java.awt.event.MouseWheelListener() {
          public void mouseWheelMoved(java.awt.event.MouseWheelEvent evt) {
            formMouseWheelMoved(evt);
          }
        });

    mainPanel.setLayout(new java.awt.BorderLayout());

    mainScrollPane.addMouseWheelListener(
        new java.awt.event.MouseWheelListener() {
          public void mouseWheelMoved(java.awt.event.MouseWheelEvent evt) {
            mainScrollPaneMouseWheelMoved(evt);
          }
        });

    drawingPanel.setOpaque(false);
    drawingPanel.addMouseMotionListener(
        new java.awt.event.MouseMotionAdapter() {
          public void mouseDragged(java.awt.event.MouseEvent evt) {
            drawingPanelMouseDragged(evt);
          }
        });
    drawingPanel.addMouseWheelListener(
        new java.awt.event.MouseWheelListener() {
          public void mouseWheelMoved(java.awt.event.MouseWheelEvent evt) {
            drawingPanelMouseWheelMoved(evt);
          }
        });
    drawingPanel.addMouseListener(
        new java.awt.event.MouseAdapter() {
          public void mouseClicked(java.awt.event.MouseEvent evt) {
            drawingPanelMouseClicked(evt);
          }

          public void mousePressed(java.awt.event.MouseEvent evt) {
            drawingPanelMousePressed(evt);
          }
        });
    drawingPanel.addKeyListener(
        new java.awt.event.KeyAdapter() {
          public void keyPressed(java.awt.event.KeyEvent evt) {
            drawingPanelKeyPressed(evt);
          }
        });
    drawingPanel.addMouseMotionListener(
        new java.awt.event.MouseMotionAdapter() {
          public void mouseMoved(java.awt.event.MouseEvent evt) {
            drawingPanelMouseMoved(evt);
          }
        });
    drawingPanel.setLayout(new java.awt.BorderLayout());
    mainScrollPane.setViewportView(drawingPanel);

    mainPanel.add(mainScrollPane, java.awt.BorderLayout.CENTER);

    jPanel1.setPreferredSize(new java.awt.Dimension(300, 765));

    jTabbedPane.addChangeListener(
        new javax.swing.event.ChangeListener() {
          public void stateChanged(javax.swing.event.ChangeEvent evt) {
            jTabbedPaneStateChanged(evt);
          }
        });

    jComboBox1.setModel(
        new javax.swing.DefaultComboBoxModel<>(
            new String[] {"Sélectionner", "Broyeur", "Concasseur", "Crible", "Convoyeur"}));
    jComboBox1.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            jComboBox1ActionPerformed(evt);
          }
        });

    jLabel2.setText("Ajouter un équipement");

    jLabel3.setText("Ajouter un noeud");

    jLabel4.setText("Ajouter une entrée");

    entreeButton.setText("Entrée");
    entreeButton.addMouseListener(
        new java.awt.event.MouseAdapter() {
          public void mousePressed(java.awt.event.MouseEvent evt) {
            entreeButtonMousePressed(evt);
          }
        });
    entreeButton.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            entreeButtonActionPerformed(evt);
          }
        });
    entreeButton.addKeyListener(
        new java.awt.event.KeyAdapter() {
          public void keyPressed(java.awt.event.KeyEvent evt) {
            entreeButtonKeyPressed(evt);
          }
        });

    jLabel5.setText("Ajouter un Arc");

    arcButton.setText("Arc");
    arcButton.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            arcButtonActionPerformed(evt);
          }
        });

    jLabel8.setText("Ajouter/Modifier un noeud ou tas");

    textFieldCoordonneeX.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            textFieldCoordonneeXActionPerformed(evt);
          }
        });

    jLabel9.setText("x :");

    jLabel10.setText("y :");

    ajoutNoeudCoordButton.setText("Modifier");
    ajoutNoeudCoordButton.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            ajoutNoeudCoordButtonActionPerformed(evt);
          }
        });

    ajoutTasCoordButton.setText("Modifier");
    ajoutTasCoordButton.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            ajoutTasCoordButtonActionPerformed(evt);
          }
        });

    jLabel1.setText("Élément(s) sélectionné(s) :");

    jTextField2.setText("0");
    jTextField2.setEnabled(false);

    jTextArea1.setEditable(false);
    jTextArea1.setColumns(20);
    jTextArea1.setRows(5);
    jTextArea1.addContainerListener(
        new java.awt.event.ContainerAdapter() {
          public void componentAdded(java.awt.event.ContainerEvent evt) {
            jTextArea1ComponentAdded(evt);
          }
        });
    jScrollPane1.setViewportView(jTextArea1);

    jLabel7.setText("Noeud");

    jLabel15.setText("Tas");

    deleteButton.setText("Supprimer");
    deleteButton.addMouseListener(
        new java.awt.event.MouseAdapter() {
          public void mouseClicked(java.awt.event.MouseEvent evt) {
            deleteButtonMouseClicked(evt);
          }

          public void mousePressed(java.awt.event.MouseEvent evt) {
            deleteButtonMousePressed(evt);
          }
        });
    deleteButton.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            deleteButtonActionPerformed(evt);
          }
        });
    deleteButton.addKeyListener(
        new java.awt.event.KeyAdapter() {
          public void keyPressed(java.awt.event.KeyEvent evt) {
            deleteButtonKeyPressed(evt);
          }
        });

    modeSelection.setText("Sélection");
    modeSelection.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            modeSelectionActionPerformed(evt);
          }
        });
    modeSelection.addKeyListener(
        new java.awt.event.KeyAdapter() {
          public void keyPressed(java.awt.event.KeyEvent evt) {
            modeSelectionKeyPressed(evt);
          }
        });

    ajoutNoeud.setText("Noeud");
    ajoutNoeud.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            ajoutNoeudActionPerformed(evt);
          }
        });

    jLabel19.setText("Ajouter un tas");

    ajoutTas.setText("Tas");
    ajoutTas.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            ajoutTasActionPerformed(evt);
          }
        });

    comboBoxMateriaux.setModel(
        new javax.swing.DefaultComboBoxModel<>(
            new String[] {"1-110", "1-214", "1-220", "1-228", "1-644", "1-630", "1-695"}));

    ajoutNoeudCoord.setText("Ajouter");
    ajoutNoeudCoord.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            ajoutNoeudCoordActionPerformed(evt);
          }
        });

    jButton2.setText("Ajouter");
    jButton2.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton2ActionPerformed(evt);
          }
        });

    javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING)
            .addGroup(
                jPanel2Layout
                    .createSequentialGroup()
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(
                                jPanel2Layout
                                    .createSequentialGroup()
                                    .addComponent(jLabel1)
                                    .addPreferredGap(
                                        javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(
                                        jTextField2,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        39,
                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(
                                jPanel2Layout
                                    .createSequentialGroup()
                                    .addContainerGap()
                                    .addGroup(
                                        jPanel2Layout
                                            .createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(jLabel8)
                                            .addGroup(
                                                jPanel2Layout
                                                    .createSequentialGroup()
                                                    .addComponent(jLabel15)
                                                    .addGap(9, 9, 9)))))
                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(
                jPanel2Layout
                    .createSequentialGroup()
                    .addContainerGap()
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(
                                jPanel2Layout
                                    .createSequentialGroup()
                                    .addGroup(
                                        jPanel2Layout
                                            .createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(jLabel2)
                                            .addGroup(
                                                jPanel2Layout
                                                    .createSequentialGroup()
                                                    .addComponent(jLabel4)
                                                    .addPreferredGap(
                                                        javax.swing.LayoutStyle.ComponentPlacement
                                                            .RELATED)
                                                    .addComponent(entreeButton)))
                                    .addContainerGap(
                                        javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addGroup(
                                javax.swing.GroupLayout.Alignment.TRAILING,
                                jPanel2Layout
                                    .createSequentialGroup()
                                    .addGap(0, 28, Short.MAX_VALUE)
                                    .addGroup(
                                        jPanel2Layout
                                            .createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING)
                                            .addGroup(
                                                javax.swing.GroupLayout.Alignment.TRAILING,
                                                jPanel2Layout
                                                    .createSequentialGroup()
                                                    .addComponent(
                                                        jComboBox1,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                    .addGap(64, 64, 64))
                                            .addGroup(
                                                javax.swing.GroupLayout.Alignment.TRAILING,
                                                jPanel2Layout
                                                    .createSequentialGroup()
                                                    .addComponent(modeSelection)
                                                    .addGap(18, 18, 18)
                                                    .addComponent(
                                                        deleteButton,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        98,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                    .addGap(25, 25, 25))
                                            .addGroup(
                                                javax.swing.GroupLayout.Alignment.TRAILING,
                                                jPanel2Layout
                                                    .createSequentialGroup()
                                                    .addGroup(
                                                        jPanel2Layout
                                                            .createParallelGroup(
                                                                javax.swing.GroupLayout.Alignment
                                                                    .LEADING,
                                                                false)
                                                            .addComponent(
                                                                ajoutNoeudCoord,
                                                                javax.swing.GroupLayout
                                                                    .DEFAULT_SIZE,
                                                                javax.swing.GroupLayout
                                                                    .DEFAULT_SIZE,
                                                                Short.MAX_VALUE)
                                                            .addComponent(
                                                                ajoutNoeudCoordButton,
                                                                javax.swing.GroupLayout
                                                                    .PREFERRED_SIZE,
                                                                0,
                                                                Short.MAX_VALUE))
                                                    .addGap(30, 30, 30)
                                                    .addComponent(ajoutTasCoordButton)
                                                    .addGap(30, 30, 30))))
                            .addGroup(
                                jPanel2Layout
                                    .createSequentialGroup()
                                    .addGroup(
                                        jPanel2Layout
                                            .createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING)
                                            .addGroup(
                                                jPanel2Layout
                                                    .createParallelGroup(
                                                        javax.swing.GroupLayout.Alignment.TRAILING)
                                                    .addGroup(
                                                        jPanel2Layout
                                                            .createParallelGroup(
                                                                javax.swing.GroupLayout.Alignment
                                                                    .LEADING)
                                                            .addComponent(jLabel3)
                                                            .addGroup(
                                                                jPanel2Layout
                                                                    .createSequentialGroup()
                                                                    .addGap(92, 92, 92)
                                                                    .addComponent(ajoutNoeud))
                                                            .addGroup(
                                                                jPanel2Layout
                                                                    .createSequentialGroup()
                                                                    .addGap(52, 52, 52)
                                                                    .addComponent(ajoutTas)
                                                                    .addPreferredGap(
                                                                        javax.swing.LayoutStyle
                                                                            .ComponentPlacement
                                                                            .RELATED)
                                                                    .addComponent(
                                                                        comboBoxMateriaux,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE,
                                                                        javax.swing.GroupLayout
                                                                            .DEFAULT_SIZE,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE))
                                                            .addComponent(jLabel19))
                                                    .addGroup(
                                                        jPanel2Layout
                                                            .createSequentialGroup()
                                                            .addGroup(
                                                                jPanel2Layout
                                                                    .createParallelGroup(
                                                                        javax.swing.GroupLayout
                                                                            .Alignment.LEADING)
                                                                    .addComponent(jLabel7)
                                                                    .addGroup(
                                                                        jPanel2Layout
                                                                            .createSequentialGroup()
                                                                            .addComponent(jLabel9)
                                                                            .addPreferredGap(
                                                                                javax.swing
                                                                                    .LayoutStyle
                                                                                    .ComponentPlacement
                                                                                    .UNRELATED)
                                                                            .addComponent(
                                                                                textFieldCoordonneeX,
                                                                                javax.swing
                                                                                    .GroupLayout
                                                                                    .PREFERRED_SIZE,
                                                                                49,
                                                                                javax.swing
                                                                                    .GroupLayout
                                                                                    .PREFERRED_SIZE)
                                                                            .addGap(18, 18, 18)
                                                                            .addComponent(jLabel10)
                                                                            .addPreferredGap(
                                                                                javax.swing
                                                                                    .LayoutStyle
                                                                                    .ComponentPlacement
                                                                                    .UNRELATED)
                                                                            .addComponent(
                                                                                textFieldCoordonneeY,
                                                                                javax.swing
                                                                                    .GroupLayout
                                                                                    .PREFERRED_SIZE,
                                                                                48,
                                                                                javax.swing
                                                                                    .GroupLayout
                                                                                    .PREFERRED_SIZE)))
                                                            .addGap(6, 6, 6)))
                                            .addGroup(
                                                jPanel2Layout
                                                    .createSequentialGroup()
                                                    .addGap(148, 148, 148)
                                                    .addComponent(jButton2))
                                            .addGroup(
                                                jPanel2Layout
                                                    .createSequentialGroup()
                                                    .addComponent(jLabel5)
                                                    .addGap(18, 18, 18)
                                                    .addComponent(
                                                        arcButton,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        83,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)))
                                    .addGap(0, 0, Short.MAX_VALUE)))));
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(
                jPanel2Layout
                    .createSequentialGroup()
                    .addContainerGap()
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(modeSelection)
                            .addComponent(deleteButton))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(jLabel2)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(
                        jComboBox1,
                        javax.swing.GroupLayout.PREFERRED_SIZE,
                        javax.swing.GroupLayout.DEFAULT_SIZE,
                        javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jLabel3)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(ajoutNoeud)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jLabel19)
                    .addGap(2, 2, 2)
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(ajoutTas)
                            .addComponent(
                                comboBoxMateriaux,
                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGap(34, 34, 34)
                    .addComponent(jLabel8)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel9)
                            .addGroup(
                                jPanel2Layout
                                    .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel10)
                                    .addComponent(
                                        textFieldCoordonneeY,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(
                                        textFieldCoordonneeX,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGap(18, 18, 18)
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel7)
                            .addComponent(jLabel15))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(ajoutNoeudCoord)
                            .addComponent(jButton2))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(ajoutTasCoordButton)
                            .addComponent(ajoutNoeudCoordButton))
                    .addGap(18, 18, 18)
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel5)
                            .addComponent(arcButton))
                    .addGap(29, 29, 29)
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel4)
                            .addComponent(entreeButton))
                    .addPreferredGap(
                        javax.swing.LayoutStyle.ComponentPlacement.RELATED, 36, Short.MAX_VALUE)
                    .addGroup(
                        jPanel2Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel1)
                            .addComponent(
                                jTextField2,
                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(
                        jScrollPane1,
                        javax.swing.GroupLayout.PREFERRED_SIZE,
                        310,
                        javax.swing.GroupLayout.PREFERRED_SIZE)));

    jTabbedPane.addTab("Plan", jPanel2);

    jLabel6.setFont(new java.awt.Font("Lucida Grande", 1, 18)); // NOI18N
    jLabel6.setText("Scénario");

    ajoutChargeur.setText("Chargeur");
    ajoutChargeur.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            ajoutChargeurActionPerformed(evt);
          }
        });

    jLabel11.setText("Ajouter un véhicule de chargement");

    jLabel12.setFont(new java.awt.Font("Lucida Grande", 1, 14)); // NOI18N
    jLabel12.setText("Ajouter un client (camion)");

    jLabel13.setFont(new java.awt.Font("Lucida Grande", 1, 18)); // NOI18N
    jLabel13.setText("Visuel");

    StartSimulation.setFont(new java.awt.Font("Lucida Grande", 0, 15)); // NOI18N
    StartSimulation.setText("Play");
    StartSimulation.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            StartSimulationActionPerformed(evt);
          }
        });

    TextSimulation.setEditable(false);
    TextSimulation.setColumns(20);
    TextSimulation.setRows(5);
    jScrollPane2.setViewportView(TextSimulation);

    jLabel14.setText("Informations");

    NomClient.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            NomClientActionPerformed(evt);
          }
        });

    addCamion.setText("Ajouter");
    addCamion.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            addCamionActionPerformed(evt);
          }
        });

    materiauxComboBox.setModel(
        new javax.swing.DefaultComboBoxModel<>(
            new String[] {"1-110", "1-214", "1-220", "1-228", "1-644", "1-630", "1-695"}));

    jLabel16.setText("Nom :");

    jLabel17.setText("Matériaux :");

    jLabel18.setText("Quantité :");

    jButton1.setText("Pause");
    jButton1.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
          }
        });

    selectionSimul.setText("Sélectionner");
    selectionSimul.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            selectionSimulActionPerformed(evt);
          }
        });

    deleteSimul.setText("Supprimer");
    deleteSimul.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            deleteSimulActionPerformed(evt);
          }
        });

    jLabel20.setText("x :");

    jLabel21.setText("Ajouter chargeur/Modifier emplacement");

    jLabel22.setText("y :");

    ajoutModifChargeur.setText("Modifier");
    ajoutModifChargeur.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            ajoutModifChargeurActionPerformed(evt);
          }
        });

    modifierCamion.setText("Modifier");
    modifierCamion.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            modifierCamionActionPerformed(evt);
          }
        });

    ajoutChargeurCoord.setText("Ajouter");
    ajoutChargeurCoord.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            ajoutChargeurCoordActionPerformed(evt);
          }
        });

    javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
    jPanel3.setLayout(jPanel3Layout);
    jPanel3Layout.setHorizontalGroup(
        jPanel3Layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(
                jPanel3Layout
                    .createSequentialGroup()
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(
                                jPanel3Layout
                                    .createSequentialGroup()
                                    .addContainerGap()
                                    .addComponent(jLabel12))
                            .addGroup(
                                jPanel3Layout
                                    .createSequentialGroup()
                                    .addGap(11, 11, 11)
                                    .addComponent(jLabel14)))
                    .addGap(0, 0, Short.MAX_VALUE))
            .addGroup(
                jPanel3Layout
                    .createSequentialGroup()
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(
                                javax.swing.GroupLayout.Alignment.TRAILING,
                                jPanel3Layout
                                    .createSequentialGroup()
                                    .addContainerGap(
                                        javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addGroup(
                                        jPanel3Layout
                                            .createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(jLabel20)
                                            .addComponent(jLabel22))
                                    .addPreferredGap(
                                        javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addGroup(
                                        jPanel3Layout
                                            .createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING, false)
                                            .addComponent(
                                                xCoordSimul,
                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                52,
                                                Short.MAX_VALUE)
                                            .addComponent(yCoordSimul))
                                    .addGap(29, 29, 29)
                                    .addGroup(
                                        jPanel3Layout
                                            .createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING, false)
                                            .addComponent(
                                                ajoutChargeurCoord,
                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                Short.MAX_VALUE)
                                            .addComponent(
                                                ajoutModifChargeur,
                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                1,
                                                Short.MAX_VALUE))
                                    .addGap(30, 30, 30))
                            .addGroup(
                                jPanel3Layout
                                    .createSequentialGroup()
                                    .addGroup(
                                        jPanel3Layout
                                            .createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING)
                                            .addGroup(
                                                jPanel3Layout
                                                    .createSequentialGroup()
                                                    .addGap(87, 87, 87)
                                                    .addComponent(ajoutChargeur))
                                            .addGroup(
                                                jPanel3Layout
                                                    .createSequentialGroup()
                                                    .addContainerGap()
                                                    .addComponent(jLabel18)
                                                    .addGap(18, 18, 18)
                                                    .addComponent(
                                                        quantiteSpinner,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        72,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                                            .addGroup(
                                                jPanel3Layout
                                                    .createSequentialGroup()
                                                    .addGap(40, 40, 40)
                                                    .addComponent(
                                                        selectionSimul,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        101,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                    .addPreferredGap(
                                                        javax.swing.LayoutStyle.ComponentPlacement
                                                            .RELATED)
                                                    .addComponent(
                                                        deleteSimul,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        95,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                                            .addGroup(
                                                jPanel3Layout
                                                    .createSequentialGroup()
                                                    .addContainerGap()
                                                    .addGroup(
                                                        jPanel3Layout
                                                            .createParallelGroup(
                                                                javax.swing.GroupLayout.Alignment
                                                                    .TRAILING,
                                                                false)
                                                            .addGroup(
                                                                javax.swing.GroupLayout.Alignment
                                                                    .LEADING,
                                                                jPanel3Layout
                                                                    .createSequentialGroup()
                                                                    .addComponent(jLabel16)
                                                                    .addPreferredGap(
                                                                        javax.swing.LayoutStyle
                                                                            .ComponentPlacement
                                                                            .RELATED,
                                                                        javax.swing.GroupLayout
                                                                            .DEFAULT_SIZE,
                                                                        Short.MAX_VALUE)
                                                                    .addComponent(
                                                                        NomClient,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE,
                                                                        153,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE))
                                                            .addGroup(
                                                                javax.swing.GroupLayout.Alignment
                                                                    .LEADING,
                                                                jPanel3Layout
                                                                    .createSequentialGroup()
                                                                    .addComponent(jLabel17)
                                                                    .addPreferredGap(
                                                                        javax.swing.LayoutStyle
                                                                            .ComponentPlacement
                                                                            .RELATED)
                                                                    .addComponent(
                                                                        materiauxComboBox,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE,
                                                                        153,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE))))
                                            .addGroup(
                                                jPanel3Layout
                                                    .createSequentialGroup()
                                                    .addContainerGap()
                                                    .addComponent(jLabel21))
                                            .addGroup(
                                                jPanel3Layout
                                                    .createSequentialGroup()
                                                    .addGap(109, 109, 109)
                                                    .addComponent(jLabel13))
                                            .addGroup(
                                                javax.swing.GroupLayout.Alignment.TRAILING,
                                                jPanel3Layout
                                                    .createSequentialGroup()
                                                    .addContainerGap()
                                                    .addComponent(addCamion)
                                                    .addGap(27, 27, 27)
                                                    .addComponent(modifierCamion))
                                            .addGroup(
                                                jPanel3Layout
                                                    .createSequentialGroup()
                                                    .addGap(97, 97, 97)
                                                    .addGroup(
                                                        jPanel3Layout
                                                            .createParallelGroup(
                                                                javax.swing.GroupLayout.Alignment
                                                                    .LEADING)
                                                            .addGroup(
                                                                jPanel3Layout
                                                                    .createSequentialGroup()
                                                                    .addComponent(
                                                                        StartSimulation,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE,
                                                                        52,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE)
                                                                    .addPreferredGap(
                                                                        javax.swing.LayoutStyle
                                                                            .ComponentPlacement
                                                                            .RELATED)
                                                                    .addComponent(
                                                                        jButton1,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE,
                                                                        51,
                                                                        javax.swing.GroupLayout
                                                                            .PREFERRED_SIZE))
                                                            .addComponent(jLabel6))))
                                    .addGap(0, 16, Short.MAX_VALUE))
                            .addGroup(
                                jPanel3Layout
                                    .createSequentialGroup()
                                    .addContainerGap()
                                    .addGroup(
                                        jPanel3Layout
                                            .createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING)
                                            .addGroup(
                                                jPanel3Layout
                                                    .createSequentialGroup()
                                                    .addComponent(jLabel11)
                                                    .addGap(0, 0, Short.MAX_VALUE))
                                            .addComponent(
                                                jScrollPane2,
                                                javax.swing.GroupLayout.Alignment.TRAILING))))
                    .addContainerGap()));
    jPanel3Layout.setVerticalGroup(
        jPanel3Layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(
                jPanel3Layout
                    .createSequentialGroup()
                    .addContainerGap()
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(selectionSimul)
                            .addComponent(deleteSimul))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(jLabel11)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(ajoutChargeur)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(jLabel21)
                    .addGap(8, 8, 8)
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(
                                xCoordSimul,
                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel20)
                            .addComponent(ajoutChargeurCoord))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(
                                jPanel3Layout
                                    .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(
                                        yCoordSimul,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(ajoutModifChargeur))
                            .addComponent(jLabel22))
                    .addGap(54, 54, 54)
                    .addComponent(jLabel12)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel16)
                            .addComponent(
                                NomClient,
                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel17)
                            .addComponent(
                                materiauxComboBox,
                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel18)
                            .addComponent(
                                quantiteSpinner,
                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(modifierCamion)
                            .addComponent(addCamion))
                    .addPreferredGap(
                        javax.swing.LayoutStyle.ComponentPlacement.RELATED, 8, Short.MAX_VALUE)
                    .addComponent(jLabel6)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(jLabel13)
                    .addGap(18, 18, 18)
                    .addGroup(
                        jPanel3Layout
                            .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(
                                jButton1,
                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                38,
                                javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(
                                StartSimulation,
                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                38,
                                javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jLabel14)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(
                        jScrollPane2,
                        javax.swing.GroupLayout.PREFERRED_SIZE,
                        292,
                        javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(12, 12, 12)));

    jTabbedPane.addTab("Simulation", jPanel3);

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(
                jPanel1Layout
                    .createSequentialGroup()
                    .addComponent(
                        jTabbedPane,
                        javax.swing.GroupLayout.PREFERRED_SIZE,
                        301,
                        javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(0, 0, Short.MAX_VALUE)));
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jTabbedPane));

    mainPanel.add(jPanel1, java.awt.BorderLayout.EAST);

    fichierMenu.setText("Fichier");

    menuNouveauProjet.setText("Nouveau projet");
    menuNouveauProjet.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            menuNouveauProjetActionPerformed(evt);
          }
        });
    fichierMenu.add(menuNouveauProjet);

    menuOuvrirProjet.setText("Ouvrir un projet");
    menuOuvrirProjet.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            menuOuvrirProjetActionPerformed(evt);
          }
        });
    fichierMenu.add(menuOuvrirProjet);

    menuSauvegarderProjet.setText("Sauvegarder");
    menuSauvegarderProjet.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            menuSauvegarderProjetActionPerformed(evt);
          }
        });
    fichierMenu.add(menuSauvegarderProjet);

    menuSauvegarderSous.setText("Sauvegarder sous...");
    menuSauvegarderSous.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            menuSauvegarderSousActionPerformed(evt);
          }
        });
    fichierMenu.add(menuSauvegarderSous);

    menuQuitter.setText("Quitter");
    menuQuitter.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            menuQuitterActionPerformed(evt);
          }
        });
    fichierMenu.add(menuQuitter);

    jMenuBar1.add(fichierMenu);

    editionMenu.setText("Édition");

    menuUndo.setText("Undo");
    editionMenu.add(menuUndo);

    menuRedo.setText("Redo");
    editionMenu.add(menuRedo);

    menuCopier.setText("Copier");
    editionMenu.add(menuCopier);

    menuColler.setText("Coller");
    editionMenu.add(menuColler);

    menuCouper.setText("Couper");
    editionMenu.add(menuCouper);

    jMenuBar1.add(editionMenu);

    affichageMenu.setText("Affichage");

    menuAffichageGrille.setText("Afficher/cacher la grille");
    menuAffichageGrille.setSelected(drawingPanel.getGridlines());
    menuAffichageGrille.addMouseListener(
        new java.awt.event.MouseAdapter() {
          public void mouseClicked(java.awt.event.MouseEvent evt) {
            menuAffichageGrilleMouseClicked(evt);
          }
        });
    menuAffichageGrille.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            menuAffichageGrilleActionPerformed(evt);
          }
        });
    affichageMenu.add(menuAffichageGrille);

    modifierGrille.setText("Modifier la grille");
    modifierGrille.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            modifierGrilleActionPerformed(evt);
          }
        });
    affichageMenu.add(modifierGrille);

    resetGrille.setText("Réinitialiser la grille");
    resetGrille.addActionListener(
        new java.awt.event.ActionListener() {
          public void actionPerformed(java.awt.event.ActionEvent evt) {
            resetGrilleActionPerformed(evt);
          }
        });
    affichageMenu.add(resetGrille);

    jMenuBar1.add(affichageMenu);

    importerMenu.setText("Importer");
    importerMenu.setToolTipText("");

    importerCarriereMenu.setText("Importer une carrière");
    importerMenu.add(importerCarriereMenu);

    importerSimulationMenu.setText("Importer une simulation");
    importerMenu.add(importerSimulationMenu);

    jMenuBar1.add(importerMenu);

    fenetreMenu.setText("Fenêtre");
    jMenuBar1.add(fenetreMenu);

    setJMenuBar(jMenuBar1);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(mainPanel, javax.swing.GroupLayout.DEFAULT_SIZE, 1524, Short.MAX_VALUE));
    layout.setVerticalGroup(
        layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(
                mainPanel,
                javax.swing.GroupLayout.DEFAULT_SIZE,
                javax.swing.GroupLayout.DEFAULT_SIZE,
                Short.MAX_VALUE));

    pack();
  } // </editor-fold>//GEN-END:initComponents

  private void jButton1ActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_jButton1ActionPerformed
    // TODO add your handling code here:
    controller.closeSimulation();
  } // GEN-LAST:event_jButton1ActionPerformed

  private void ajoutChargeurCoordActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_ajoutChargeurCoordActionPerformed

    int coordX = Integer.parseInt(xCoordSimul.getText());
    int coordY = Integer.parseInt(yCoordSimul.getText());
    Point point = new Point(coordX, coordY);

    this.controller.addChargeur(point);
    drawingPanel.repaint();
    simulationTextField();
  } // GEN-LAST:event_ajoutChargeurCoordActionPerformed

  private void jButton2ActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_jButton2ActionPerformed
    if (this.currentApplicationMode != ApplicationMode.ADD_PLAN) {
      setAppMode(ApplicationMode.ADD_PLAN);
    }
    this.selectedEquipementMode = EquipementModes.TAS;

    int coordX = Integer.parseInt(textFieldCoordonneeX.getText());
    int coordY = Integer.parseInt(textFieldCoordonneeY.getText());

    Point point = new Point(coordX, coordY);

    String code = (String) comboBoxMateriaux.getSelectedItem();

    this.controller.addTas(point, code);
    drawingPanel.repaint();
    rafraichissementTextField();
  } // GEN-LAST:event_jButton2ActionPerformed

  private void ajoutNoeudCoordActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_ajoutNoeudCoordActionPerformed
    if (this.currentApplicationMode != ApplicationMode.ADD_PLAN) {
      setAppMode(ApplicationMode.ADD_PLAN);
    }
    this.selectedEquipementMode = EquipementModes.NOEUD;

    int coordX = Integer.parseInt(textFieldCoordonneeX.getText());
    int coordY = Integer.parseInt(textFieldCoordonneeY.getText());

    Point point = new Point(coordX, coordY);
    this.controller.addNoeud(point, this.selectedEquipementMode);
    drawingPanel.repaint();
    rafraichissementTextField();
  } // GEN-LAST:event_ajoutNoeudCoordActionPerformed

  private void modifierCamionActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_modifierCamionActionPerformed
    // TODO add your handling code here:
    String nomClient = NomClient.getText();
    String materiau = (String) materiauxComboBox.getSelectedItem();
    double quantite = (Integer) quantiteSpinner.getValue();

    if (nomClient.isEmpty()) {
      JOptionPane.showMessageDialog(null, "Attention, vous devez entrer un nom valide");
    } else if (quantite <= 0) {
      JOptionPane.showMessageDialog(
          null, "Attention, vous devez entrer un chiffre plus grand que zéro");
    } else {
      for (Camion camion : controller.getCamionList()) {
        if (camion.isSelected()) {
          controller.EditCamion(camion, nomClient, materiau, quantite);
        }
      }
      drawingPanel.repaint();
      simulationTextField();
    }
  } // GEN-LAST:event_modifierCamionActionPerformed

  private void ajoutModifChargeurActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_ajoutModifChargeurActionPerformed
    List<Chargeur> chargeurs = controller.getChargeurList();

    int coordX = Integer.parseInt(xCoordSimul.getText());
    int coordY = Integer.parseInt(yCoordSimul.getText());
    Point point = new Point(coordX, coordY);

    for (Chargeur chargeur : chargeurs) {
      if (chargeur.isSelected()) {
        chargeur.setPoint(point);
      }
    }
    drawingPanel.repaint();
    simulationTextField();
  } // GEN-LAST:event_ajoutModifChargeurActionPerformed

  private void ajoutNoeudActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_ajoutNoeudActionPerformed
    if (this.currentApplicationMode != ApplicationMode.ADD_PLAN) {
      setAppMode(ApplicationMode.ADD_PLAN);
    }
    this.setMode(EquipementModes.NOEUD);
  } // GEN-LAST:event_ajoutNoeudActionPerformed

  private void ajoutTasActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_ajoutTasActionPerformed
    if (this.currentApplicationMode != ApplicationMode.ADD_PLAN) {
      setAppMode(ApplicationMode.ADD_PLAN);
    }
    this.setMode(EquipementModes.TAS);
  }

  private void deleteSimulActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_deleteSimulActionPerformed
    List<Chargeur> chargeurs = controller.getChargeurList();
    List<Camion> camions = controller.getCamionList();

    for (Chargeur chargeur : chargeurs) {
      if (chargeur.isSelected()) {
        controller.removeChargeur(chargeur);
        drawingPanel.repaint();
      }
    }

    for (Camion camion : camions) {
      if (camion.isSelected()) {
        controller.removeCamion(camion);
        drawingPanel.repaint();
      }
    }
    drawingPanel.repaint();
    simulationTextField();
  } // GEN-LAST:event_deleteSimulActionPerformed

  private void selectionSimulActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_selectionSimulActionPerformed
    this.setAppMode(ApplicationMode.SELECT_SIMUL);
  } // GEN-LAST:event_selectionSimulActionPerformed

  private void StartSimulationActionPerformed(java.awt.event.ActionEvent evt) {
    drawingPanel.startSimulation();
    drawingPanel.repaint();
  }

  private void jButton6ActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_jButton6ActionPerformed
    // TODO add your handling code here:
  } // GEN-LAST:event_jButton6ActionPerformed

  private void deleteButtonMousePressed(
      java.awt.event.MouseEvent evt) { // GEN-FIRST:event_deleteButtonMousePressed
    // TODO add your handling code here:
  } // GEN-LAST:event_deleteButtonMousePressed

  private void deleteButtonMouseClicked(
      java.awt.event.MouseEvent evt) { // GEN-FIRST:event_deleteButtonMouseClicked
    // TODO add your handling code here:
  } // GEN-LAST:event_deleteButtonMouseClicked

  private void deleteButtonKeyPressed(
      java.awt.event.KeyEvent evt) { // GEN-FIRST:event_deleteButtonKeyPressed
    // TODO add your handling code here:
  } // GEN-LAST:event_deleteButtonKeyPressed

  private void modeSelectionKeyPressed(
      java.awt.event.KeyEvent evt) { // GEN-FIRST:event_modeSelectionKeyPressed
    // TODO add your handling code here:
  } // GEN-LAST:event_modeSelectionKeyPressed

  private void nomMateriauActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_nomMateriauActionPerformed
    // TODO add your handling code here:
  } // GEN-LAST:event_nomMateriauActionPerformed

  private void NomClientActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_NomClientActionPerformed
  } // GEN-LAST:event_NomClientActionPerformed

  private void addCamionActionPerformed(java.awt.event.ActionEvent evt) {
    Point point = controller.getEntree().getPoint();
    String nomClient = NomClient.getText();
    String materiau = (String) materiauxComboBox.getSelectedItem();
    double quantite = (Integer) quantiteSpinner.getValue();

    if (nomClient.isEmpty()) {
      JOptionPane.showMessageDialog(null, "Attention, vous devez entrer un nom valide");
    } else if (quantite <= 0) {
      JOptionPane.showMessageDialog(
          null, "Attention, vous devez entrer un chiffre plus grand que zéro");
    } else {

      int index = 0;
      // mettre la camion dans la file d'attente
      for (Camion camion : controller.getCamionList()) {
        index++;
      }

      Point newPoint = new Point(point.x - (75 * index), point.y);

      controller.addCamion(newPoint, nomClient, materiau, quantite);
      drawingPanel.repaint();
      simulationTextField();
    }
  }

  public void simulationTextField() {
    TextSimulation.setText("");
    NomClient.setText("");
    xCoordSimul.setText("");
    yCoordSimul.setText("");
    List<Camion> camions = controller.getCamionList();
    List<Chargeur> chargeurs = controller.getChargeurList();

    for (Camion camion : camions) {
      if (camion.isSelected()) {
        String codeProduit = camion.getJeton().getCodeProduit();
        String nomClient = camion.getJeton().getRefClient();
        int quantite = (int) camion.getJeton().getQuantite();

        String laQuantite = String.format("%d", quantite);

        TextSimulation.append("\n\nNom du client : " + nomClient);
        TextSimulation.append("\nCode du produit demandé : " + codeProduit);
        TextSimulation.append("\nQuantité demandé : " + laQuantite);

        NomClient.setText(nomClient);
      }
    }

    for (Chargeur chargeur : chargeurs) {
      if (chargeur.isSelected()) {
        int xCoord = (int) chargeur.getX();
        int yCoord = (int) chargeur.getY();

        String x = String.format("%d", xCoord);
        String y = String.format("%d", yCoord);

        xCoordSimul.setText(x);
        yCoordSimul.setText(y);
      }
    }
  }

  private void deleteButtonActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_deleteButtonActionPerformed
    List<Equipement> equipements = controller.getEquipementList();
    List<AbstractPointChemin> noeuds = controller.getNoeudList();
    ArrayList<List<Arc>> arcs = controller.getArcList();
    ArrayList<List<Convoyeur>> convoyeurs = controller.getConvoyeurList();

    for (Equipement equipement : equipements) {
      if (equipement.isSelected()) {
        controller.removeEquipement(equipement);
        drawingPanel.repaint();
      }
    }

    for (AbstractPointChemin noeud : noeuds) {
      if (noeud.isSelected()) {
        controller.removeNoeud(noeud);
        drawingPanel.repaint();
      }
    }

    for (List<Arc> arcList : arcs) {
      for (Arc arc : arcList) {
        if (arc.isSelected()) {
          controller.removeArc(arc);
          drawingPanel.repaint();
        }
      }
    }

    for (List<Convoyeur> convoyeurList : convoyeurs) {
      for (Convoyeur convoyeur : convoyeurList) {
        if (convoyeur.isSelected()) {
          controller.removeConvoyeur(convoyeur);
          drawingPanel.repaint();
        }
      }
    }

    rafraichissementTextField();
    drawingPanel.repaint();
  } // GEN-LAST:event_deleteButtonActionPerformed

  private void textFieldCoordonneeXActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_textFieldCoordonneeXActionPerformed
  } // GEN-LAST:event_textFieldCoordonneeXActionPerformed

  private void jButton3ActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_jButton3ActionPerformed
    ajoutClientJFrame.setVisible(true);
    ajoutClientJFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
  } // GEN-LAST:event_jButton3ActionPerformed

  private void ajoutChargeurActionPerformed(java.awt.event.ActionEvent evt) {
    if (this.currentApplicationMode != ApplicationMode.ADD_SIMULATION) {
      setAppMode(ApplicationMode.ADD_SIMULATION);
    }
    this.setVehicule(VehiculeModes.CHARGEUR);
  }

  private void drawingPanelKeyPressed(java.awt.event.KeyEvent evt) {
    if (evt.getKeyCode() == KeyEvent.VK_BACK_SPACE || evt.getKeyCode() == KeyEvent.VK_DELETE) {
      List<Equipement> equipements = controller.getEquipementList();
      List<AbstractPointChemin> noeuds = controller.getNoeudList();
      ArrayList<List<Arc>> arcs = controller.getArcList();
      List<Chargeur> chargeurs = controller.getChargeurList();
      Entree entree = controller.getEntree();
      ArrayList<List<Convoyeur>> convoyeurs = controller.getConvoyeurList();

      for (List<Convoyeur> convoyeurList : convoyeurs) {
        for (Convoyeur convoyeur : convoyeurList) {
          if (convoyeur.isSelected()) {
            controller.removeConvoyeur(convoyeur);
            drawingPanel.repaint();
          }
        }
      }

      for (Equipement equipement : equipements) {
        if (equipement.isSelected()) {
          controller.removeEquipement(equipement);
          drawingPanel.repaint();
        }
      }

      for (Chargeur chargeur : chargeurs) {
        if (chargeur.isSelected()) {
          controller.removeChargeur(chargeur);
          drawingPanel.repaint();
        }
      }

      for (AbstractPointChemin noeud : noeuds) {
        if (noeud.isSelected()) {
          controller.removeNoeud(noeud);
          drawingPanel.repaint();
        }
      }

      for (List<Arc> arcList : arcs) {
        for (Arc arc : arcList) {
          if (arc.isSelected()) {
            controller.removeArc(arc);
            drawingPanel.repaint();
          }
        }
      }
      rafraichissementTextField();
      drawingPanel.repaint();
    }
  } // GEN-LAST:event_drawingPanelKeyPressed

  private void resetGrilleActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_resetGrilleActionPerformed
    double gapGrille = 100;
    this.drawingPanel.setGapGrille(gapGrille);
    this.drawingPanel.repaint();
  } // GEN-LAST:event_resetGrilleActionPerformed

  private void modifierGrilleActionPerformed(java.awt.event.ActionEvent evt) {
    JPanel fields = new JPanel(new GridLayout(2, 2));
    JTextField textField = new JTextField();
    textField.setPreferredSize(new Dimension(11, 15));
    JLabel label = new JLabel("mètres");

    fields.add(textField);
    fields.add(label);

    int result =
        JOptionPane.showConfirmDialog(
            null,
            fields,
            "Entrer les dimensions d'un carré de la grille",
            JOptionPane.OK_CANCEL_OPTION,
            JOptionPane.QUESTION_MESSAGE);

    if (result == JOptionPane.OK_OPTION) {
      double newGridGap;
      try {
        newGridGap = Double.parseDouble(textField.getText());
      } catch (Exception exc) {
        JOptionPane.showMessageDialog(null, "La valeur entrée n'est pas un chiffre valide");
        return;
      }
      if (newGridGap <= 0) {
        JOptionPane.showMessageDialog(null, "La valeur entrée doit être plus grande que zéro");
        throw new ArithmeticException("Negative grid gap.");
      }
      newGridGap = UnitConverter.pixelToMeter(newGridGap);
      this.drawingPanel.setGapGrille(newGridGap);
    }
    this.drawingPanel.repaint();
  }

  private void ajoutNoeudCoordButtonActionPerformed(java.awt.event.ActionEvent evt) {
    List<AbstractPointChemin> noeuds = controller.getNoeudList();
    this.selectedEquipementMode = EquipementModes.NOEUD;

    int coordX = Integer.parseInt(textFieldCoordonneeX.getText());
    int coordY = Integer.parseInt(textFieldCoordonneeY.getText());

    Point point = new Point(coordX, coordY);

    for (AbstractPointChemin noeud : noeuds) {
      if (noeud.isSelected()) {
        noeud.setPoint(point);
      }
    }
    drawingPanel.repaint();
    rafraichissementTextField();
  }

  private void ajoutTasCoordButtonActionPerformed(java.awt.event.ActionEvent evt) {

    this.selectedEquipementMode = EquipementModes.TAS;
    List<Equipement> equipements = controller.getEquipementList();

    int coordX = Integer.parseInt(textFieldCoordonneeX.getText());
    int coordY = Integer.parseInt(textFieldCoordonneeY.getText());
    String newCode = (String) comboBoxMateriaux.getSelectedItem();

    Point point = new Point(coordX, coordY);

    for (Equipement equipement : equipements) {
      if (equipement.getName().equals("Tas")) {
        if (equipement.isSelected()) {
          equipement.setPoint(point);
          equipement.setMaterialCode(newCode);
        }
      }
    }
    drawingPanel.repaint();
    rafraichissementTextField();
  }

  private void jTabbedPaneStateChanged(
      javax.swing.event.ChangeEvent evt) { // GEN-FIRST:event_jTabbedPaneStateChanged
    // TODO add your handling code here:
    if (jTabbedPane.getSelectedIndex() == 0) {
      if (this.currentApplicationMode != ApplicationMode.ADD_PLAN) {
        setAppMode(ApplicationMode.ADD_PLAN);
      }
    } else {
      if (this.currentApplicationMode != ApplicationMode.ADD_SIMULATION) {
        setAppMode(ApplicationMode.ADD_SIMULATION);
      }
      if (!controller.validateDependencies()) {
        jTabbedPane.setSelectedIndex(0);
        JOptionPane.showMessageDialog(
            null,
            "Attention, il y a des erreurs dans votre Plan concernant les équipements.\n"
                + "Veuillez les corriger.\nRappel :\n"
                + "Un crible doit être reliée à un broyeur\n"
                + "Un broyeur doit être relié à une crible ou un concasseur\n"
                + "Un concasseur doit être relié à un broyeur");
      }
    }
  } // GEN-LAST:event_jTabbedPaneStateChanged

  private void menuSauvegarderSousActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    this.controller.saveAs();
  }

  private void menuOuvrirProjetActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    this.controller.openFile();
  } // GEN-LAST:event_menuOuvrirProjetActionPerformed

  private void menuSauvegarderProjetActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_menuSauvegarderProjetActionPerformed
    // TODO add your handling code here:
    this.controller.save();
  } // GEN-LAST:event_menuSauvegarderProjetActionPerformed

  private void ajoutCamionKeyPressed(
      java.awt.event.KeyEvent evt) { // GEN-FIRST:event_ajoutCamionKeyPressed
    // TODO add your handling code here:
    this.setVehicule(VehiculeModes.CAMION);
  } // GEN-LAST:event_ajoutCamionKeyPressed

  private void entreeButtonKeyPressed(
      java.awt.event.KeyEvent evt) { // GEN-FIRST:event_entreeButtonKeyPressed
    // TODO add your handling code here:
  } // GEN-LAST:event_entreeButtonKeyPressed

  private void entreeButtonMousePressed(
      java.awt.event.MouseEvent evt) { // GEN-FIRST:event_entreeButtonMousePressed
    // TODO add your handling code here:
  } // GEN-LAST:event_entreeButtonMousePressed

  private void drawingPanelMouseClicked(
      java.awt.event.MouseEvent evt) { // GEN-FIRST:event_drawingPanelMouseClicked
    // TODO add your handling code here:
  } // GEN-LAST:event_drawingPanelMouseClicked

  private void arcButtonActionPerformed(java.awt.event.ActionEvent evt) {
    setAppMode(ApplicationMode.ADD_ARC);
    this.controller.getNoeudForArcList().clear();
    // this.setMode(EquipementModes.ARC);
  }

  private void entreeButtonActionPerformed(java.awt.event.ActionEvent evt) {

    if (this.currentApplicationMode != ApplicationMode.ADD_PLAN) {
      setAppMode(ApplicationMode.ADD_PLAN);
    }

    this.setMode(EquipementModes.ENTREE);
  }

  private void jTextArea1ComponentAdded(
      java.awt.event.ContainerEvent evt) { // GEN-FIRST:event_jTextArea1ComponentAdded
  } // GEN-LAST:event_jTextArea1ComponentAdded

  public void rafraichissementTextField() {
    jTextArea1.setText("");
    jTextField2.setText("0");
    textFieldCoordonneeX.setText("");
    textFieldCoordonneeY.setText("");
    int numTotal = 0;
    int numNoeud = 0;
    int numTas = 0;
    int numArc = 0;
    int numConvoyeur = 0;
    List<Equipement> equipements = controller.getEquipementList();
    List<AbstractPointChemin> noeuds = controller.getNoeudList();
    ArrayList<List<Convoyeur>> convoyeurs = controller.getConvoyeurList();

    ArrayList<List<Arc>> arcs = controller.getArcList();
    Entree entree = controller.getEntree();

    if (entree.isSelected()) {
      numTotal++;
      String nom = String.format("\nCoordonnées de l'%s", entree.getName());
      String xCoord = String.format(":\n x : %d", (int) entree.getX());
      String yCoord = String.format(", y : %d", (int) entree.getY());
      String nombreTotal = String.format("%d", numTotal);
      jTextArea1.append(nom + xCoord + yCoord);
      jTextField2.setText(nombreTotal);
    }

    for (Equipement equipement : equipements) {
      if (equipement.isSelected()) {
        numTotal++;
        String nom = String.format("\nCoordonnées du %s", equipement.getName());
        String xCoord = String.format(":\n x : %d", (int) equipement.getX());
        String yCoord = String.format(", y : %d", (int) equipement.getY());
        String nombreTotal = String.format("%d", numTotal);
        jTextArea1.append(nom + xCoord + yCoord);
        jTextField2.setText(nombreTotal);

        if (equipement.getName().equals("Tas")) {
          String x = String.format("%d", (int) equipement.getX());
          String y = String.format("%d", (int) equipement.getY());
          String code = equipement.getMaterialCode();
          jTextArea1.append("\n Code du matériau : " + code);
          textFieldCoordonneeX.setText(x);
          textFieldCoordonneeY.setText(y);
        }
      }
    }

    for (AbstractPointChemin noeud : noeuds) {
      if (noeud.getName().equals("Noeud")) {
        numNoeud++;
      }
      if (noeud.getName().equals("Tas")) {
        numTas++;
      }
      if (noeud.isSelected()) {
        numTotal++;
        String nom = String.format("\nCoordonnées du %s", noeud.getName());
        String num = String.format(" #%d", numNoeud);
        String xCoord = String.format(":\n x : %d", (int) noeud.getX());
        String yCoord = String.format(", y : %d", (int) noeud.getY());
        String nombreTotal = String.format("%d", numTotal);
        jTextArea1.append(nom + num + xCoord + yCoord);
        jTextField2.setText(nombreTotal);

        String x = String.format("%d", (int) noeud.getX());
        String y = String.format("%d", (int) noeud.getY());
        textFieldCoordonneeX.setText(x);
        textFieldCoordonneeY.setText(y);
      }
    }

    for (List<Convoyeur> listConvoyeur : convoyeurs) {
      for (Convoyeur convoyeur : listConvoyeur) {
        if (convoyeur.isSelected()) {
          numTotal++;
          numConvoyeur++;
          Point middlePoint =
              new Point(
                  convoyeur.middlePointOfConvoyeur(
                      (int) convoyeur.getStarting().getX(),
                      (int) convoyeur.getStarting().getY(),
                      (int) convoyeur.getArrival().getX(),
                      (int) convoyeur.getArrival().getY()));
          String nom = String.format("\nCoordonnées du point milieu du %s", convoyeur.getName());
          String num = String.format(" #%d", numConvoyeur);
          String xCoord = String.format(":\n x : %d", (int) middlePoint.getX());
          String yCoord = String.format(", y : %d", (int) middlePoint.getY());
          String nombreTotal = String.format("%d", numTotal);
          jTextArea1.append(nom + num + xCoord + yCoord);
          jTextField2.setText(nombreTotal);
        }
      }
    }

    for (List<Arc> listArc : arcs) {
      for (Arc arc : listArc)
        if (arc.isSelected()) {
          numTotal++;
          numArc++;
          Point middlePoint =
              new Point(
                  arc.middlePointOfArc(
                      (int) arc.getStarting().getX(),
                      (int) arc.getStarting().getY(),
                      (int) arc.getArrival().getX(),
                      (int) arc.getArrival().getY()));
          String nom = String.format("\nCoordonnées du point milieu de l'%s", arc.getName());
          String num = String.format(" #%d", numArc);
          String xCoord = String.format(":\n x : %d", (int) middlePoint.getX());
          String yCoord = String.format(", y : %d", (int) middlePoint.getY());
          String nombreTotal = String.format("%d", numTotal);
          jTextArea1.append(nom + num + xCoord + yCoord);
          jTextField2.setText(nombreTotal);
        }
    }
  }

  private void drawingPanelMouseDragged(java.awt.event.MouseEvent evt) {
    // Serait intéressant de dessiner l'arc au fur et à mesure :
    // https://stackoverflow.com/questions/9711938/java-draw-line-as-the-mouse-is-moved
    Point mousePoint = evt.getPoint();
    drawingPanel.setMouseX(mousePoint.getX());
    drawingPanel.setMouseY(mousePoint.getY());
    drawingPanel.repaint();

    if (SwingUtilities.isRightMouseButton(evt)) {
      double deltaX =
          (((int) evt.getX() / drawingPanel.getZoom()) - (int) (this.currentMousePoint.getX()));
      double deltaY =
          (((int) evt.getY() / drawingPanel.getZoom()) - (int) (this.currentMousePoint.getY()));
      this.controller.updateSelectedItemsPositions(deltaX, deltaY);

      this.currentMousePoint =
          new Point(
              (int) (evt.getX() / drawingPanel.getZoom()),
              (int) (evt.getY() / drawingPanel.getZoom()));
      drawingPanel.repaint();
      rafraichissementTextField();
      simulationTextField();
    }
  } // GEN-LAST:event_drawingPanelMouseDragged

  private void ajoutSimulationActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_ajoutSimulationActionPerformed
    this.setAppMode(ApplicationMode.ADD_SIMULATION);
  } // GEN-LAST:event_ajoutSimulationActionPerformed

  private void ajoutElementActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_ajoutElementActionPerformed
    this.setAppMode(ApplicationMode.ADD_PLAN);
  } // GEN-LAST:event_ajoutElementActionPerformed

  private void drawingPanelMouseWheelMoved(java.awt.event.MouseWheelEvent evt) {
    Point point = evt.getPoint();
    this.currentMousePoint = evt.getPoint();
    if (evt.getPreciseWheelRotation() > 0) {
      drawingPanel.zoomIn(point);
    } else {
      drawingPanel.zoomOut(point);
    }
  } // GEN-LAST:event_drawingPanelMouseWheelMoved

  private void jComboBox1ActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_jComboBox1ActionPerformed

    if (this.currentApplicationMode != ApplicationMode.ADD_PLAN) {
      setAppMode(ApplicationMode.ADD_PLAN);
    }
    if (jComboBox1.getSelectedItem() == "Broyeur") {
      this.setMode(EquipementModes.BROYEUR);

    } else if (jComboBox1.getSelectedItem() == "Concasseur") {
      this.setMode(EquipementModes.CONCASSEUR);

    } else if (jComboBox1.getSelectedItem() == "Crible") {
      this.setMode(EquipementModes.CRIBLE);

    } else if (jComboBox1.getSelectedItem() == "Convoyeur") {
      this.setMode(EquipementModes.CONVOYEUR);
      controller.clearEquipementConv();
    } else if (jComboBox1.getSelectedItem() == "Sélectionner") {
      this.setMode(EquipementModes.RIEN);
    }
  }

  private void modeSelectionActionPerformed(java.awt.event.ActionEvent evt) {
    this.setAppMode(ApplicationMode.SELECT);
  }

  private void drawingPanelMousePressed(java.awt.event.MouseEvent evt) {
    Point mousePoint = evt.getPoint();
    this.initMousePoint =
        new Point(
            (int) (evt.getX() / drawingPanel.getZoom()),
            (int) (evt.getY() / drawingPanel.getZoom()));

    this.currentMousePoint = new Point(this.initMousePoint);
    this.requestFocus();

    if (this.currentApplicationMode == ApplicationMode.SELECT
        && SwingUtilities.isLeftMouseButton(evt)) {
      double xPos = this.currentMousePoint.getX();
      double yPos = this.currentMousePoint.getY();
      this.controller.switchSelectionStatus(xPos, yPos, evt.isShiftDown());
      rafraichissementTextField();
      drawingPanel.repaint();

    } else if (this.currentApplicationMode == ApplicationMode.ADD_PLAN
        && SwingUtilities.isLeftMouseButton(evt)) {
      if (drawingPanel.getGridlines()) {
        int coordX =
            (int) (this.initMousePoint.getX() / drawingPanel.getGapGrille())
                * (int) drawingPanel.getGapGrille();
        int coordY =
            (int) (this.initMousePoint.getY() / drawingPanel.getGapGrille())
                * (int) drawingPanel.getGapGrille();
        Point apoint = new Point(coordX, coordY);
        Controller.EquipementModes actualEquipement = this.selectedEquipementMode;
        this.controller.addEquipement(actualEquipement, apoint);
        drawingPanel.repaint();

      } else {
        Point point = new Point((int) this.initMousePoint.getX(), (int) this.initMousePoint.getY());
        if (this.selectedEquipementMode == EquipementModes.TAS) {
          String code = (String) comboBoxMateriaux.getSelectedItem();
          this.controller.addTas(point, code);
        }
        Controller.EquipementModes actualEquipement = this.selectedEquipementMode;
        this.controller.addEquipement(actualEquipement, point);

        drawingPanel.repaint();
      }

    } else if (this.currentApplicationMode == ApplicationMode.ADD_SIMULATION
        && SwingUtilities.isLeftMouseButton(evt)) {
      Point point = new Point((int) this.initMousePoint.getX(), (int) this.initMousePoint.getY());
      controller.addChargeur(point);

      drawingPanel.repaint();

    } else if (this.currentApplicationMode == ApplicationMode.ADD_ARC
        && SwingUtilities.isLeftMouseButton(evt)) {
      Point point = new Point((int) this.initMousePoint.getX(), (int) this.initMousePoint.getY());

      this.controller.noeudSelection(point.getX(), point.getY());
      if (this.controller.getPointsForArcList().size() == 2) {
        AbstractPointChemin starting = this.controller.getPointsForArcList().get(0);
        AbstractPointChemin arrival = this.controller.getPointsForArcList().get(1);
        this.controller.addArc(mousePoint, starting, arrival);
        for (AbstractPointChemin noeud : this.controller.getPointsForArcList()) {
          noeud.switchSelectionStatus();
        }
        this.controller.getPointsForArcList().clear();
      }

      drawingPanel.repaint();

    } else if (this.currentApplicationMode == ApplicationMode.SELECT_SIMUL
        && SwingUtilities.isLeftMouseButton(evt)) {
      double xPos = this.currentMousePoint.getX();
      double yPos = this.currentMousePoint.getY();
      this.controller.changementSelectionStatus(xPos, yPos);
      drawingPanel.repaint();
      simulationTextField();
    }
  }

  private void drawingPanelMouseMoved(java.awt.event.MouseEvent evt) {
    Point mousePoint = evt.getPoint();
    drawingPanel.setMouseX(mousePoint.getX());
    drawingPanel.setMouseY(mousePoint.getY());
    drawingPanel.repaint();
  }

  private void formMouseWheelMoved(java.awt.event.MouseWheelEvent evt) {}

  private void mainScrollPaneMouseWheelMoved(java.awt.event.MouseWheelEvent evt) {
    Point point = evt.getPoint();
    this.currentMousePoint = evt.getPoint();
    if (evt.getPreciseWheelRotation() > 0) {
      drawingPanel.zoomIn(point);
    } else {
      drawingPanel.zoomOut(point);
    }
  }

  private void menuNouveauProjetActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_menuNouveauProjetActionPerformed
    // TODO add your handling code here:
    this.controller.newProject();
  } // GEN-LAST:event_menuNouveauProjetActionPerformed

  private void menuQuitterActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_menuQuitterActionPerformed
    System.exit(0);
  } // GEN-LAST:event_menuQuitterActionPerformed

  private void buttonAjouterNoeudActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_buttonAjouterNoeudActionPerformed
    // TODO add your handling code here:
  } // GEN-LAST:event_buttonAjouterNoeudActionPerformed

  private void buttonAjouterArcActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_buttonAjouterArcActionPerformed
    // TODO add your handling code here:
  } // GEN-LAST:event_buttonAjouterArcActionPerformed

  private void buttonAjouterConcasseurActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_buttonAjouterConcasseurActionPerformed
    // TODO add your handling code here:
  } // GEN-LAST:event_buttonAjouterConcasseurActionPerformed

  private void buttonAjouterConvoyeurActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_buttonAjouterConvoyeurActionPerformed
    // TODO add your handling code here:
  } // GEN-LAST:event_buttonAjouterConvoyeurActionPerformed

  private void jButton4ActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_jButton4ActionPerformed
    // TODO add your handling code here:
  } // GEN-LAST:event_jButton4ActionPerformed

  private void menuAffichageGrilleActionPerformed(
      java.awt.event.ActionEvent evt) { // GEN-FIRST:event_menuAffichageGrilleActionPerformed
    drawingPanel.setGridLines();
  } // GEN-LAST:event_menuAffichageGrilleActionPerformed

  private void menuAffichageGrilleMouseClicked(
      java.awt.event.MouseEvent evt) { // GEN-FIRST:event_menuAffichageGrilleMouseClicked
    // TODO add your handling code here:
  } // GEN-LAST:event_menuAffichageGrilleMouseClicked

  /** @param args the command line arguments */
  public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    // <editor-fold defaultstate="collapsed" desc=" Look and feel setting code
    // (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the default
     * look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
      for (javax.swing.UIManager.LookAndFeelInfo info :
          javax.swing.UIManager.getInstalledLookAndFeels()) {
        if ("Nimbus".equals(info.getName())) {
          javax.swing.UIManager.setLookAndFeel(info.getClassName());
          break;
        }
      }
    } catch (ClassNotFoundException ex) {
      java.util.logging.Logger.getLogger(MainWindow.class.getName())
          .log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
      java.util.logging.Logger.getLogger(MainWindow.class.getName())
          .log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
      java.util.logging.Logger.getLogger(MainWindow.class.getName())
          .log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
      java.util.logging.Logger.getLogger(MainWindow.class.getName())
          .log(java.util.logging.Level.SEVERE, null, ex);
    }
    // </editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(
        new Runnable() {
          public void run() {
            new MainWindow().setVisible(true);
          }
        });
  }

  public Dimension getMainScrollPaneDimension() {
    return mainScrollPane.getSize();
  }

  public JScrollPane getMainScrollPane() {
    return this.mainScrollPane;
  }

  public void setMainScrollPanePosition(Point point) {
    this.mainScrollPane.getViewport().setViewPosition(point);
  }

  // Variables declaration - do not modify//GEN-BEGIN:variables
  private javax.swing.JTextField NomClient;
  private javax.swing.JButton StartSimulation;
  private javax.swing.JTextArea TextSimulation;
  private javax.swing.JButton addCamion;
  private javax.swing.JMenu affichageMenu;
  private javax.swing.JToggleButton ajoutChargeur;
  private javax.swing.JButton ajoutChargeurCoord;
  private javax.swing.JButton ajoutModifChargeur;
  private javax.swing.JToggleButton ajoutNoeud;
  private javax.swing.JButton ajoutNoeudCoord;
  private javax.swing.JButton ajoutNoeudCoordButton;
  private javax.swing.JToggleButton ajoutTas;
  private javax.swing.JButton ajoutTasCoordButton;
  private javax.swing.JButton arcButton;
  private javax.swing.ButtonGroup buttonGroup1;
  private javax.swing.JComboBox<String> comboBoxMateriaux;
  private javax.swing.JButton deleteButton;
  private javax.swing.JButton deleteSimul;
  private virtucarriere.gui.DrawingPanel drawingPanel;
  private javax.swing.JMenu editionMenu;
  private javax.swing.JButton entreeButton;
  private javax.swing.JMenu fenetreMenu;
  private javax.swing.JMenu fichierMenu;
  private javax.swing.JMenuItem importerCarriereMenu;
  private javax.swing.JMenu importerMenu;
  private javax.swing.JMenuItem importerSimulationMenu;
  private javax.swing.JButton jButton1;
  private javax.swing.JButton jButton2;
  private javax.swing.JComboBox<String> jComboBox1;
  private javax.swing.JLabel jLabel1;
  private javax.swing.JLabel jLabel10;
  private javax.swing.JLabel jLabel11;
  private javax.swing.JLabel jLabel12;
  private javax.swing.JLabel jLabel13;
  private javax.swing.JLabel jLabel14;
  private javax.swing.JLabel jLabel15;
  private javax.swing.JLabel jLabel16;
  private javax.swing.JLabel jLabel17;
  private javax.swing.JLabel jLabel18;
  private javax.swing.JLabel jLabel19;
  private javax.swing.JLabel jLabel2;
  private javax.swing.JLabel jLabel20;
  private javax.swing.JLabel jLabel21;
  private javax.swing.JLabel jLabel22;
  private javax.swing.JLabel jLabel3;
  private javax.swing.JLabel jLabel4;
  private javax.swing.JLabel jLabel5;
  private javax.swing.JLabel jLabel6;
  private javax.swing.JLabel jLabel7;
  private javax.swing.JLabel jLabel8;
  private javax.swing.JLabel jLabel9;
  private javax.swing.JMenuBar jMenuBar1;
  private javax.swing.JPanel jPanel1;
  private javax.swing.JPanel jPanel2;
  private javax.swing.JPanel jPanel3;
  private javax.swing.JScrollPane jScrollPane1;
  private javax.swing.JScrollPane jScrollPane2;
  private javax.swing.JTabbedPane jTabbedPane;
  private javax.swing.JTextArea jTextArea1;
  private javax.swing.JTextField jTextField2;
  private javax.swing.JPanel mainPanel;
  private javax.swing.JScrollPane mainScrollPane;
  private javax.swing.JComboBox<String> materiauxComboBox;
  private javax.swing.JMenuItem menuAffichageGrille;
  private javax.swing.JMenuItem menuColler;
  private javax.swing.JMenuItem menuCopier;
  private javax.swing.JMenuItem menuCouper;
  private javax.swing.JMenuItem menuNouveauProjet;
  private javax.swing.JMenuItem menuOuvrirProjet;
  private javax.swing.JMenuItem menuQuitter;
  private javax.swing.JMenuItem menuRedo;
  private javax.swing.JMenuItem menuSauvegarderProjet;
  private javax.swing.JMenuItem menuSauvegarderSous;
  private javax.swing.JMenuItem menuUndo;
  private javax.swing.JToggleButton modeSelection;
  private javax.swing.JButton modifierCamion;
  private javax.swing.JMenuItem modifierGrille;
  private javax.swing.JSpinner quantiteSpinner;
  private javax.swing.JMenuItem resetGrille;
  private javax.swing.JToggleButton selectionSimul;
  private javax.swing.JTextField textFieldCoordonneeX;
  private javax.swing.JTextField textFieldCoordonneeY;
  private javax.swing.JTextField xCoordSimul;
  private javax.swing.JTextField yCoordSimul;
  // End of variables declaration//GEN-END:variables
}
